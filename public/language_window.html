<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Seleccionar idioma</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; margin: 12px; color: #222; }
    .center { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; gap:12px; }
    h3 { margin: 0; font-size: 18px; }
    .langs { display:flex; gap: 12px; margin-top: 8px; }
    button { padding:8px 14px; font-size: 14px; border-radius: 6px; border: 1px solid #bbb; background: #fff; cursor: pointer; }
    button.primary { background: #1e7ae6; color: #fff; border-color: #1661c4; font-weight: 600; }
    .note { font-size: 12px; color: #666; text-align: center; max-width: 360px; }
  </style>
</head>
<body>
  <div class="center" role="dialog" aria-labelledby="lang-title">
    <h3 id="lang-title">Seleccione idioma / Select language</h3>

    <div class="langs" role="group" aria-label="Idiomas disponibles">
      <button id="btnEs" class="primary" title="Español">Español</button>
      <button id="btnEn" title="English">English</button>
    </div>

    <div class="note">La selección se guardará y se usará en próximos inicios de la aplicación.</div>
  </div>

  <script>
    const btnEs = document.getElementById('btnEs');
    const btnEn = document.getElementById('btnEn');

    btnEs.addEventListener('click', async () => {
      try {
        await window.languageAPI.setLanguage('es');
      } catch (e) {
        console.error("Error setLanguage es:", e);
      } finally {
        window.close();
      }
    });

    btnEn.addEventListener('click', async () => {
      try {
        await window.languageAPI.setLanguage('en');
      } catch (e) {
        console.error("Error setLanguage en:", e);
      } finally {
        window.close();
      }
    });

    // Optional: if user closes window without selection, main will apply fallback = 'es'
  </script>
</body>
</html>
